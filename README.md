# 百ます計算（Webアプリ / 単一HTML）

「百ます計算」を **HTML 1ファイル**だけで動かす、シンプルなWebアプリです。  
作問（問題作成）→ URL共有 → 解答（タイム計測＋正誤判定）までをブラウザだけで完結させています。

---

## 特徴

- **単一HTML構成**（ビルド不要・外部ライブラリ不要）
- **作問モード**
  - 上段10個・左列10個（合計20個）を編集
  - ランダム生成（0〜9 / 0〜99）
  - ランダム生成時：上段10個の中／左列10個の中で **重複なし**
  - URLに問題をエンコードして共有可能
- **解答モード**
  - 「スタート」押下で **入力解禁＋タイム計測開始**
  - 「終わる」押下で **タイマーストップ＋正誤判定（誤りを赤表示）**
  - 解答中は、いま計算している **2つの数字（上段・左列）をハイライト**
  - 画面上に `左の数 + 上の数 = ?`（引き算なら `−`）を表示
- **モバイル最適化**
  - 11列（角＋10列）を **横スクロール無し**で画面幅に収める
  - 数字・余白は画面幅に合わせて自動調整
  - テンキーの **Enter** で次のマスへ移動（右へ、右端なら次行左端）

---

## ファイル

- `index.html`  
  このファイルをブラウザで開くだけで動作します。

---

## 使い方

### 1) ローカルで開く

`index.html` をダブルクリックしてブラウザで開きます。

※ ブラウザや環境によっては、ローカルファイルでURLパラメータの挙動が扱いにくい場合があります。  
その場合は簡易サーバで開くと安定します。

例（Python）:

```bash
python -m http.server 8000
# ブラウザで http://localhost:8000/hyakumasu.html
```

### 2) 作問モード

右上の「作問モードへ」から作問画面に切り替えます。

- 上段10個・左列10個を編集（0〜99）
- 「ランダム生成」で値を自動生成
- 「URLに反映」→「URLをコピー」で問題URLを共有

### 3) 解答モード

「スタート」を押すまで入力できません。  
スタート後は入力でき、タイム計測が始まります。

- `Enter` で次のマスに移動
- 「終わる」で正誤判定とタイム表示
- 「リセット」で入力を消して最初から（再びロック状態に戻ります）

---

## URLパラメータ

共有URLは以下のパラメータで状態を復元します。

- `op` : `add`（足し算） / `sub`（引き算：左 − 上）
- `mode` : `solve` / `make`
- `values` : 20個の数値（上段10 + 左列10）をエンコードした文字列

例:

```
?op=add&mode=solve&values=0A0F0Z...（40文字）
```

### `values` の仕様（0〜99対応）

- **2文字 × 20個 = 合計40文字**
- 1つの数値を **base36**（`0-9A-Z`）で表し、2文字にゼロパディングします

エンコード概念:

- 数値 `n`（0〜99）を `n.toString(36).toUpperCase().padStart(2, '0')` とする
- 上段10個 → 左列10個 の順で連結

> 互換：旧形式（1文字×20＝0〜35）も読み取りだけ対応しています。

## カスタマイズのヒント

- 10×10以外のサイズ対応（例：5×5 / 12×12）
- 自動遷移（入力桁が揃ったら次マスへ）
- タイムのランキング保存（LocalStorage）
- 生成ロジック（重複制約、難易度調整）
